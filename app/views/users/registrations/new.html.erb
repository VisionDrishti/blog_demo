<h2>Sign up</h2>

<%= nested_form_for([resource_name, resource.with_address], url: registration_path(resource_name)) do |f| %>
                <%= render "users/shared/error_messages", resource: resource %>
                
                  <div class="field">
                    <%= f.label :avatar %><br />
                    <%= f.file_field :avatar %>
                   </div>
                <div class="field">
                  <%= f.label :first_name %><br />
                  <%= f.text_field :first_name  %>
                </div>

                <div class="field">
                  <%= f.label :last_name %><br />
                  <%= f.text_field :last_name %>
                </div>

                <div class="field">
                  <%= f.label :email %><br />
                  <%= f.email_field :email, autofocus: true, autocomplete: "email" %>
                </div>


                <div class="field">
                  <%= f.label :password %>
                  <% if @minimum_password_length %>
                  <em>(<%= @minimum_password_length %> characters minimum)</em>
                  <% end %><br />
                  <%= f.password_field :password, autocomplete: "new-password" %>
                </div>

                <div class="field">
                  <%= f.label :password_confirmation %><br />
                  <%= f.password_field :password_confirmation, autocomplete: "new-password" %>
                </div>

                <%= f.fields_for :address do |builder| %>
                    <h2>Address Details</h2>
                    <div class="field">
                      <%= builder.label :city %><br />
                      <%= builder.text_field :city %>
                    </div>

                    <div class="field">
                      <%= builder.label :state %><br />
                      <%= builder.text_area :state %><br />
                    </div>

                    <div class="field">
                      <%= builder.label :street %><br />
                      <%= builder.text_area :street %><br />
                    </div>

                    <div class="field">
                      <%= builder.label :zip%><br />
                      <%= builder.text_area :zip %><br />
                    </div>

                  <% end %>
              <div class="actions">
            <%= f.submit "Sign up" %>
          </div>
        <% end %>

<%= render "users/shared/links" %>
